import numpy as np
import matplotlib.pyplot as plt
import pandas as pd 




ci=pd.read_csv("jpta_male.csv",sep=',')
grid=np.array(ci.grid)
grid*= 19540.07
q15,q25,q50,q75,q85=np.array(ci.q15),np.array(ci.q25),np.array(ci.q50),np.array(ci.q75),np.array(ci.q85)

def ntfa10(a10,q10):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q10,label="Quantile 0.15 GMM Objective Function")
    plt.xlim(-3000,3000)
    plt.ylim(-2.5,50)
    plt.plot([502,502,], [-5,3.76244,], 'k-', linewidth=1.25)
    plt.plot([-532, -532,], [-5,3.76244,], 'k-', linewidth=1.25)
    plt.legend(loc="upper left")
    plt.title("Quantile 0.15 subsidized training on male trainee earnings")
    #plt.show()
    plt.savefig('jpta_male15.png')
ntfa10(grid,q15)    


def ntfa25(a10,q10):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q10,label="Quantile 0.25 GMM Objective Function")
    plt.xlim(-3000,3000)
    plt.ylim(-2.5,50)
    plt.plot([1076, 1076,], [-5,3.92045,], 'k-', linewidth=1.25)
    plt.plot([-616, -616,], [-5,3.77841,], 'k-', linewidth=1.25)
    plt.legend(loc="upper")
    plt.title("Quantile 0.25 subsidized training on male trainee earnings")
    #plt.show()
    plt.savefig('jpta_male25.png')
ntfa25(grid,q25) 
def ntfa50(a10,q10):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q10,label="Quantile 0.5 GMM Objective Function")
    plt.xlim(-3000,5000)
    plt.ylim(-2.5,50)
    plt.plot([-1467, -1467,], [-5,3.92045,], 'k-', linewidth=1.25)
    plt.plot([2161, 2161,], [-5,3.77841,], 'k-', linewidth=1.25)
    plt.legend(loc="upper")
    plt.title("Quantile 0.5 subsidized training on male trainee earnings")
    #plt.show()
    plt.savefig('jpta_male50.png')
ntfa50(grid,q50) 

def ntfa75(a10,q10):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q10,label="Quantile 0.75 GMM Objective Function")
    plt.xlim(-3000,6500)
    plt.ylim(-2.5,50)
    plt.plot([-1221, -1221,], [-2.5,3.92045,], 'k-', linewidth=1.25)
    plt.plot([5655, 5655,], [-2.5,3.77841,], 'k-', linewidth=1.25)
    plt.legend(loc="upper")
    plt.title("Quantile 0.75 subsidized training on male trainee earnings")
    #plt.show()
    plt.savefig('jpta_male75.png')
ntfa75(grid,q75) 

def ntfa90(a10,q10):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q10,label="Quantile 0.85 GMM Objective Function")
    plt.xlim(-3000,6500)
    plt.ylim(-2.5,15)
    plt.plot([-50, -50,], [-2.5,3.77841,], 'k-', linewidth=1.25)
    plt.plot([6002, 6002,], [-2.5,3.77841,], 'k-', linewidth=1.25)
    plt.legend(loc="upper")
    plt.title("Quantile 0.85 subsidized training on male trainee earnings")
    #plt.show()
    plt.savefig('jpta_male85.png')     
ntfa90(grid,q85) 

ci=pd.read_csv("jpta_female.csv",sep=',')
grid=np.array(ci.grid)
grid*=13414.65
q15,q25,q50,q75,q85=np.array(ci.q15),np.array(ci.q25),np.array(ci.q50),np.array(ci.q75),np.array(ci.q85)


def tw10(a10,q10):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q10,label="Quantile 0.15 GMM Objective Function")
    plt.xlim(-2000,2000)
    plt.ylim(-2.5,50)
    plt.plot([185.484, 185.484,], [-5,3.76882,], 'k-', linewidth=1.25)
    plt.plot([-56, -56,], [-5, 3.76882,], 'k-', linewidth=1.25)
    plt.legend(loc="upper left")
    plt.title("Quantile 0.15 subsidized training on female trainee earnings")
    #plt.show()
    plt.savefig('jpta_female15.png')     
tw10(grid,q15) 
def tw25(a10,q25):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q25,label="Quantile 0.25 GMM Objective Function")
    plt.xlim(-2000,2000)
    plt.ylim(-2.5,50)
    plt.plot([-8, -8,], [-5, 3.73697,], 'k-', linewidth=1.25)
    plt.plot([806, 806,], [-5, 3.73697,], 'k-', linewidth=1.25)
    plt.legend(loc="upper right")
    plt.title("Quantile 0.25 subsidized training on female trainee earnings")
    #plt.show()
    plt.savefig('jpta_female25.png')  
tw25(grid,q25) 

def tw50(a10,q50):
    critical=np.repeat(3.84146,len(a10))
    fig, ax = plt.subplots()
    ax.plot(a10,critical,linestyle='--',label="critical point")
    ax.plot(a10,q50,label="Quantile 0.5 GMM Objective Function")
    plt.xlim(-3000,6000)
    plt.ylim(-2.5,50)
    plt.plot([2891, 2891,], [-5, 3.73697,], 'k-', linewidth=1.25)
    plt.plot([96, 96,], [-5, 3.80952,], 'k-', linewidth=1.25)
    plt.legend(loc="upper center")
    plt.title("Quantile 0.5 subsidized training on female trainee earnings")
    #plt.show()
    plt.savefig('jpta_female50.png')
tw50(grid,q50) 
def tw75(a75,q75):
    critical=np.repeat(3.84146,len(a75))
    fig, ax = plt.subplots()
    ax.plot(a75,critical,linestyle='--',label="critical point")
    ax.plot(a75,q75,label="Quantile 0.75 GMM Objective Function")
    plt.xlim(-3000,7000)
    plt.ylim(-2.5,30)
    plt.plot([4725, 4725,], [-5, 3.73697,], 'k-', linewidth=1.25)
    plt.plot([290, 290,], [-5, 3.80952,], 'k-', linewidth=1.25)
    plt.legend(loc="upper right")
    plt.title("Quantile 0.75 subsidized training on female trainee earnings")
    #plt.show()
    plt.savefig('jpta_female75.png')
tw75(grid,q75) 

def tw90(a75,q75):
    critical=np.repeat(3.84146,len(a75))
    fig, ax = plt.subplots()
    ax.plot(a75,critical,linestyle='--',label="critical point")
    ax.plot(a75,q75,label="Quantile 0.85 GMM Objective Function")
    plt.xlim(-3000,5000)
    plt.ylim(-2.5,30)
    plt.plot([4338, 4338,], [-5, 3.73697,], 'k-', linewidth=1.25)
    plt.plot([-903, -903,], [-5, 3.80952,], 'k-', linewidth=1.25)
    plt.legend(loc="upper right")
    plt.title("Quantile 0.85 subsidized training on female trainee earnings")
    #plt.show()
    plt.savefig('jpta_female85.png')
tw90(grid,q85) 


QTE=pd.read_csv("jpta_hdm_QTE.csv",sep=',')
male=np.delete(np.array(QTE.iloc[3]), 0)
female=np.delete(np.array(QTE.iloc[5]), 0)
x=np.arange(0.1,0.95,0.05)
fig, ax = plt.subplots()
ax.plot(x,male, '-o', ms=8, lw=3, alpha=1, mfc='orange',label="Distribution effct of subsidized training on male trainee earnings")
ax.legend(loc="upper left")
plt.savefig('male.png')


fig, ax = plt.subplots()
ax.plot(x,female, '-o', ms=8, lw=3, alpha=1, mfc='orange',label="Distribution effct of subsidized training on female trainee earnings")
ax.legend(loc="upper left")
plt.savefig('female.png')

